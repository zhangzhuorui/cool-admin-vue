import{a as e}from"./@vue_runtime-dom@3.5.18-D95plCo_.js";import{_ as s}from"./logo-CxXS7KxG.js";import{u as a,a as t,s as r}from"./index-D3YIdvZh.js";import{n as o}from"./@element-plus_icons-vue@2.3.1_vue@3.5.18_typescript@5.5.4_-3DUFfuWD.js";import"./store@2.0.12-BfN7CKDu.js";import{a as l,E as i}from"./element-plus@2.10.2_vue@3.5.18_typescript@5.5.4_-C0B857f5.js";import{d as p,e as m,A as u,c,o as n,N as d,O as _,m as v,a as h,R as f}from"./@vue_runtime-core@3.5.18-Bx_iA1Ob.js";import{u as j}from"./vue-i18n@11.1.10_vue@3.5.18_typescript@5.5.4_-CsgNkmMV.js";import{v as y,y as g,u as b}from"./@vue_reactivity@3.5.18-BEjiziYi.js";import{_ as w}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{P as V}from"./@vue_shared@3.5.18-BWKBh1Qo.js";import"./@vueuse_core@12.8.2_typescript@5.5.4-CyTP3PVf.js";import"./@vueuse_shared@12.8.2_typescript@5.5.4-B6jvMh_s.js";import"./lodash-es@4.17.21-DuLBTDIG.js";import"./mitt@3.0.1-BeZB7Ik_.js";import"./pinia@2.3.1_typescript@5.5.4_vue@3.5.18_typescript@5.5.4_-DPB-daMN.js";import"./vue-router@4.5.1_vue@3.5.18_typescript@5.5.4_-LCN95BWb.js";import"./comm-D8jqGG-6.js";import"./element-plus@2.10.4_vue@3.5.18_typescript@5.5.4_-BKZsM6nW.js";import"./dayjs@1.11.13-DxKHiy_y.js";import"./chardet@2.1.0-B0E1a5C9.js";import"./normalize-wheel-es@1.2.0-TzhA1irr.js";import"./@vueuse_core@9.13.0_vue@3.5.18_typescript@5.5.4_-CQVfZnDR.js";import"./@vueuse_shared@9.13.0_vue@3.5.18_typescript@5.5.4_-DyKSiD-b.js";import"./@ctrl_tinycolor@3.6.1-D2oWfImC.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.18_echarts@5.6.0_vue@3.5.18_typescript@5.5.4_-He2CYVXX.js";import"./echarts@5.6.0-D5a_RdwN.js";import"./tslib@2.3.0-ZseNXxlj.js";import"./zrender@5.6.1-BkMfNy7l.js";import"./axios@1.11.0-C-1G2k3o.js";import"./nprogress@0.2.0-Sg3Wh2FH.js";import"./@sxzz_popperjs-es@2.11.7-CT_jBSb5.js";import"./async-validator@4.2.5-j0i5Y79Y.js";import"./memoize-one@6.0.0-BAtLgO95.js";import"./@floating-ui_dom@1.7.2-CHufsicy.js";import"./@floating-ui_core@1.7.2-DWnBSKmT.js";import"./@floating-ui_utils@0.2.10-QZXVpxRV.js";import"./@intlify_core-base@11.1.10-C1bgUhoS.js";import"./@intlify_shared@11.1.10-BEv--mwN.js";import"./@intlify_message-compiler@11.1.10-JI08Nz38.js";const C=["innerHTML"],x=["src"],$=p({name:"undefined"}),k=w(p({...$,name:"pic-captcha",emits:["update:modelValue","change"],setup(e,{expose:s,emit:t}){const r=t,{service:i}=a(),{t:p}=j(),h=y(""),f=y("");async function b(){f.value="",h.value="",await i.base.open.captcha({height:45,width:150,color:"#2c3142"}).then(({captchaId:e,data:s})=>{s?(s.includes(";base64,")?h.value=s:f.value=s,r("update:modelValue",e),r("change",{base64:h,svg:f,captchaId:e})):l.alert(p("验证码获取失败"),{title:p("提示"),type:"error"})}).catch(e=>{l.alert(e.message,{title:p("提示"),type:"error"})})}return m(()=>{b()}),s({refresh:b}),(e,s)=>{const a=u("el-icon");return n(),c("div",{class:"pic-captcha",onClick:b},[f.value?(n(),c("div",{key:0,class:"svg",innerHTML:f.value},null,8,C)):h.value?(n(),c("img",{key:1,class:"base64",src:h.value,alt:""},null,8,x)):(n(),d(a,{key:2,class:"is-loading",size:18},{default:_(()=>[v(g(o))]),_:1}))])}}}),[["__scopeId","data-v-99da335b"]]),I={class:"page-login"},z={class:"box"},L={class:"logo"},T={class:"desc"},U={class:"form"},O={class:"op"},E={class:"bg"},H=p({name:"undefined"}),K=w(p({...H,name:"login",setup(o){const{refs:p,setRefs:m,router:d,service:w}=a(),{user:C,app:x}=t(),{t:$}=j(),H=y(!1),K=b({username:r.get("username")||"",password:"",captchaId:"",verifyCode:""});async function M(){if(!K.username)return i.error($("用户名不能为空"));if(!K.password)return i.error($("密码不能为空"));if(!K.verifyCode)return i.error($("图片验证码不能为空"));H.value=!0;try{await w.base.open.login(K).then(C.setToken),await Promise.all(x.events.hasToken.map(e=>e())),r.set("username",K.username),d.push("/")}catch(e){p.picCaptcha.refresh(),l.alert(e.message,{title:$("提示"),type:"error"})}H.value=!1}return(a,t)=>{const r=u("el-input"),o=u("el-form-item"),l=u("el-button"),i=u("el-form"),p=u("cl-svg");return n(),c("div",I,[h("div",z,[h("div",L,[t[5]||(t[5]=h("div",{class:"icon"},[h("img",{src:s,alt:"Logo"})],-1)),h("span",null,V(g(x).info.name),1)]),h("p",T,V(a.$t("快速开发后台权限管理系统")),1),h("div",U,[v(i,{"label-position":"top",class:"form",disabled:H.value},{default:_(()=>[v(o,{label:a.$t("用户名")},{default:_(()=>[v(r,{modelValue:K.username,"onUpdate:modelValue":t[0]||(t[0]=e=>K.username=e),placeholder:a.$t("请输入用户名"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(o,{label:a.$t("密码")},{default:_(()=>[v(r,{modelValue:K.password,"onUpdate:modelValue":t[1]||(t[1]=e=>K.password=e),type:"password",placeholder:a.$t("请输入密码"),maxlength:"20","show-password":"",autocomplete:"new-password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(o,{label:a.$t("验证码")},{default:_(()=>[v(r,{modelValue:K.verifyCode,"onUpdate:modelValue":t[4]||(t[4]=e=>K.verifyCode=e),placeholder:a.$t("验证码"),maxlength:"4",onKeyup:e(M,["enter"])},{suffix:_(()=>[v(k,{ref:g(m)("picCaptcha"),modelValue:K.captchaId,"onUpdate:modelValue":t[2]||(t[2]=e=>K.captchaId=e),onChange:t[3]||(t[3]=()=>{K.verifyCode=""})},null,8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),h("div",O,[v(l,{type:"primary",loading:H.value,onClick:M},{default:_(()=>[f(V(a.$t("登录")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled"])])]),h("div",E,[v(p,{name:"bg"})]),t[6]||(t[6]=h("a",{href:"https://cool-js.com",class:"copyright"}," Copyright © COOL ",-1))])}}}),[["__scopeId","data-v-dcae4eac"]]);export{K as default};
