import{u as e,a as s,m as a,b as t}from"./index-D3YIdvZh.js";import"./store@2.0.12-BfN7CKDu.js";import{U as l}from"./@element-plus_icons-vue@2.3.1_vue@3.5.18_typescript@5.5.4_-3DUFfuWD.js";import{c as n,F as o,v as i,D as r,d as p}from"./lodash-es@4.17.21-DuLBTDIG.js";import{d as c,v as u,A as m,c as d,o as f,N as v,O as _,R as h,F as y,a0 as b,a as k,w as j,P as w,e as g,m as x,Q as C,i as z,H as F,f as I,a6 as M}from"./@vue_runtime-core@3.5.18-Bx_iA1Ob.js";import{y as P,v as W,u as L,m as R}from"./@vue_reactivity@3.5.18-BEjiziYi.js";import{P as S,p as E}from"./@vue_shared@3.5.18-BWKBh1Qo.js";import{_ as N}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{E as $,a as O}from"./element-plus@2.10.2_vue@3.5.18_typescript@5.5.4_-C0B857f5.js";import{u as V}from"./vue-i18n@11.1.10_vue@3.5.18_typescript@5.5.4_-CsgNkmMV.js";import{_ as A}from"./logo-CxXS7KxG.js";import{w as B,T as D}from"./@vue_runtime-dom@3.5.18-D95plCo_.js";import{b as G}from"./comm-D8jqGG-6.js";import"./@vueuse_core@12.8.2_typescript@5.5.4-CyTP3PVf.js";import"./@vueuse_shared@12.8.2_typescript@5.5.4-B6jvMh_s.js";import"./mitt@3.0.1-BeZB7Ik_.js";import"./pinia@2.3.1_typescript@5.5.4_vue@3.5.18_typescript@5.5.4_-DPB-daMN.js";import"./vue-router@4.5.1_vue@3.5.18_typescript@5.5.4_-LCN95BWb.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.18_echarts@5.6.0_vue@3.5.18_typescript@5.5.4_-He2CYVXX.js";import"./echarts@5.6.0-D5a_RdwN.js";import"./tslib@2.3.0-ZseNXxlj.js";import"./zrender@5.6.1-BkMfNy7l.js";import"./axios@1.11.0-C-1G2k3o.js";import"./nprogress@0.2.0-Sg3Wh2FH.js";import"./chardet@2.1.0-B0E1a5C9.js";import"./@vueuse_shared@9.13.0_vue@3.5.18_typescript@5.5.4_-DyKSiD-b.js";import"./@vueuse_core@9.13.0_vue@3.5.18_typescript@5.5.4_-CQVfZnDR.js";import"./@sxzz_popperjs-es@2.11.7-CT_jBSb5.js";import"./@ctrl_tinycolor@3.6.1-D2oWfImC.js";import"./dayjs@1.11.13-DxKHiy_y.js";import"./async-validator@4.2.5-j0i5Y79Y.js";import"./memoize-one@6.0.0-BAtLgO95.js";import"./normalize-wheel-es@1.2.0-TzhA1irr.js";import"./@floating-ui_dom@1.7.2-CHufsicy.js";import"./@floating-ui_core@1.7.2-DWnBSKmT.js";import"./@floating-ui_utils@0.2.10-QZXVpxRV.js";import"./element-plus@2.10.4_vue@3.5.18_typescript@5.5.4_-BKZsM6nW.js";import"./@intlify_core-base@11.1.10-C1bgUhoS.js";import"./@intlify_shared@11.1.10-BEv--mwN.js";import"./@intlify_message-compiler@11.1.10-JI08Nz38.js";const H={class:"route-nav"},T={class:"text-[14px]"},U=c({name:"undefined"}),q=N(c({...U,name:"route-nav",setup(a){const{route:t,browser:i}=e(),{menu:r}=s(),p=u(()=>n(r.group.map(function e(s){if("/"===t.path)return!1;if(s.path==t.path)return s;if(s.children){const a=s.children.map(e).find(Boolean);return!!a&&[s,a]}return!1}).filter(Boolean))),c=u(()=>{var e,s;return null==(s=null==(e=o(p.value))?void 0:e.meta)?void 0:s.label});return(e,s)=>{const a=m("el-text"),t=m("el-breadcrumb-item"),n=m("el-breadcrumb");return f(),d("div",H,[P(i).isMini?(f(),v(a,{key:0,class:"font-bold"},{default:_(()=>[h(S(c.value),1)]),_:1})):(f(),v(n,{key:1,"separator-icon":P(l)},{default:_(()=>[(f(!0),d(y,null,b(p.value,(e,s)=>(f(),v(t,{key:s},{default:_(()=>{var s;return[k("span",T,S((null==(s=e.meta)?void 0:s.label)||e.name),1)]}),_:2},1024))),128))]),_:1},8,["separator-icon"]))])}}}),[["__scopeId","data-v-92a1d07f"]]),J={class:"a-menu"},K=["onClick"],Q={class:"text-[12px] tracking-wider whitespace-nowrap"},Y=c({name:"undefined"}),X=N(c({...Y,name:"a-menu",setup(a){const{router:t,route:l}=e(),{menu:n}=s(),{t:o}=V(),i=W(0),r=u(()=>n.group.filter(e=>e.isShow));return j(()=>[l.path,n.group.length],()=>{!function(){let e=0;r.value.forEach(function s(a,t){switch(a.type){case 0:a.children&&a.children.forEach(e=>{s(e,t)});break;case 1:l.path.includes(a.path)&&(e=t)}}),i.value=e,n.setMenu(e)}()},{immediate:!0}),(e,s)=>{const a=m("cl-svg");return f(),d("div",J,[(f(!0),d(y,null,b(r.value,(e,s)=>{var l;return f(),d("div",{class:E(["a-menu__item",{"is-active":s==i.value}]),key:e.id,onClick:e=>function(e){var s;if(e==i.value)return!1;const a=r.value[e],l=n.getPath(a);l?(n.setMenu(e),t.push(l)):$.warning(o("{label} 没有子菜单，请先添加",{label:null==(s=a.meta)?void 0:s.label}))}(s)},[e.icon?(f(),v(a,{key:0,class:"mr-3",name:e.icon,size:16},null,8,["name"])):w("",!0),k("span",Q,S(null==(l=e.meta)?void 0:l.label),1)],10,K)}),128))])}}}),[["__scopeId","data-v-8cffe37a"]]),Z={class:"app-topbar"},ee={class:"app-topbar__tools"},se={class:"app-topbar__user"},ae={class:"user"},te={class:"det"},le=c({name:"undefined"}),ne=N(c({...le,name:"app-topbar",setup(t){const{router:l,service:n,browser:o}=e(),{user:p,app:c}=s(),{t:j}=V();async function z(e){switch(e){case"my":l.push("/my/info");break;case"exit":O.confirm(j("确定退出登录吗？"),j("提示"),{type:"warning"}).then(async()=>{await n.base.comm.logout(),p.logout()}).catch(()=>null)}}const F=L({list:[],async init(){const e=i(a.list.filter(e=>!1!==e.enable&&!!e.toolbar).map(e=>e.toolbar),"order");this.list=await Promise.all(e.filter(e=>null==e?void 0:e.component).map(async e=>{if(e){const s=await(r(e.component)?e.component():e.component);return{...e,component:R(s.default||s)}}}))}}),I=u(()=>F.list.filter(e=>o.isMini?(null==e?void 0:e.h5)??!0:(null==e?void 0:e.pc)??!0));return g(()=>{F.init()}),(e,s)=>{const a=m("cl-svg"),t=m("el-text"),l=m("cl-avatar"),n=m("el-dropdown-item"),o=m("el-dropdown-menu"),i=m("el-dropdown");return f(),d("div",Z,[k("div",{class:"cl-comm__icon mr-[10px]",onClick:s[0]||(s[0]=e=>P(c).fold())},[P(c).isFold?(f(),v(a,{key:0,name:"fold"})):(f(),v(a,{key:1,name:"expand"}))]),P(c).info.menu.isGroup?(f(),v(X,{key:0})):(f(),v(q,{key:1})),s[1]||(s[1]=k("div",{class:"flex1"},null,-1)),k("ul",ee,[(f(!0),d(y,null,b(I.value,(e,s)=>(f(),d("li",{key:s},[(f(),v(C(e.component)))]))),128))]),P(p).info?(f(),v(i,{key:2,"hide-on-click":"","popper-class":"app-topbar__user-popper","popper-options":{},onCommand:z},{dropdown:_(()=>[k("div",ae,[x(l,{size:34,src:P(p).info.headImg},null,8,["src"]),k("div",te,[x(t,{size:"small",tag:"p"},{default:_(()=>[h(S(P(p).info.nickName),1)]),_:1}),x(t,{size:"small",type:"info"},{default:_(()=>[h(S(P(p).info.email),1)]),_:1})])]),x(o,null,{default:_(()=>[x(n,{command:"my"},{default:_(()=>[x(a,{name:"my"}),k("span",null,S(P(j)("个人中心")),1)]),_:1}),x(n,{command:"exit"},{default:_(()=>[x(a,{name:"exit"}),k("span",null,S(P(j)("退出登录")),1)]),_:1})]),_:1})]),default:_(()=>[k("div",se,[x(t,{class:"mr-[10px]"},{default:_(()=>[h(S(P(p).info.nickName),1)]),_:1}),x(l,{size:26,src:P(p).info.headImg},null,8,["src"])])]),_:1})):w("",!0)])}}}),[["__scopeId","data-v-219d5939"]]);const oe=c({name:"b-menu",props:{keyWord:String},setup(a){const{router:t,route:l,browser:n,refs:o,setRefs:i}=e(),{menu:r,app:c}=s();function u(e){e!=l.path&&t.push(e),n.isMini&&c.fold(!0)}const d=p(()=>{if(!a.keyWord)return;const e=s=>{s.forEach(s=>{var a;if(0==s.type){try{null==(a=o.menu)||a.open(String(s.id))}catch(t){}s.children&&e(s.children)}})};e(r.list)},300);return j(()=>a.keyWord,d),()=>{let e;return x("div",{class:"app-slider__menu"},[x(m("el-menu"),{ref:i("menu"),"default-active":l.path,"background-color":"transparent","collapse-transition":!1,collapse:!n.isMini&&c.isFold,onSelect:u,"popper-offset":10},(s=e=function e(s,t){var l;const n=(null==(l=a.keyWord)?void 0:l.toLowerCase())||"";return s.filter(function e(s){var a,l;return!!s.isShow&&(!!t||!!(null==(l=null==(a=s.meta)?void 0:a.label)?void 0:l.toLowerCase().includes(n))||!!s.children&&s.children.some(e))}).map(s=>{var a,l,o;(null==(l=null==(a=s.meta)?void 0:a.label)?void 0:l.toLowerCase().includes(n))&&(t=!0);const i=e=>{var s;const a=[x(m("cl-svg"),{name:e.icon,size:18},null),x("span",{class:"ml-4 tracking-wider text-[14px] mr-auto text-ellipsis overflow-hidden whitespace-nowrap"},[null==(s=e.meta)?void 0:s.label])];return 1==e.type&&e.badge&&a.push(x("div",{class:["b-menu__badge",`is-${e.badgeColor}`]},[x("span",null,[e.badge])])),a};return 0==s.type?z(x(m("el-sub-menu"),null,null),{index:String(s.id),key:s.id,popperClass:"app-slider__menu"},{title:()=>i(s),default:()=>e(s.children||[],t)}):z(x(m("el-menu-item"),null,null),{index:(null==(o=s.meta)?void 0:o.isHome)?"/":s.path,key:s.id},{default:()=>i(s)})})}(r.list),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!F(s)?e:{default:()=>[e]}))]);var s}}}),ie={class:"app-slider__logo"},re={key:0},pe={class:"app-slider__search"},ce={class:"app-slider__container"},ue=c({name:"undefined"}),me=c({...ue,name:"app-slider",setup(e){const{browser:a}=t(),{app:l}=s(),n=W("");return(e,s)=>{const t=m("cl-svg"),o=m("el-input"),i=m("el-scrollbar");return f(),d("div",{class:E(["app-slider",{"is-collapse":P(l).isFold}])},[k("div",ie,[s[2]||(s[2]=k("img",{src:A},null,-1)),!P(l).isFold||P(a).isMini?(f(),d("span",re,S(P(l).info.name),1)):w("",!0)]),k("div",pe,[x(o,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),placeholder:e.$t("搜索关键字"),clearable:"",onFocus:s[1]||(s[1]=e=>P(l).fold(!1))},{prefix:_(()=>[x(t,{name:"search",size:16})]),_:1},8,["modelValue","placeholder"])]),k("div",ce,[x(i,null,{default:_(()=>[x(P(oe),{keyWord:n.value},null,8,["keyWord"])]),_:1})])],2)}}}),de={class:"app-process"},fe={class:"app-process__op"},ve={class:"app-process__container"},_e={class:"app-process__list"},he=["data-index","onClick","onContextmenu"],ye={class:"label tracking-wider"},be={class:"app-process__op"},ke=c({name:"undefined"}),je=N(c({...ke,name:"app-process",setup(a){const{refs:t,setRefs:l,route:n,router:i,mitt:r}=e(),{process:p,app:c}=s(),{t:u}=V();function h(){r.emit("view.refresh")}function w(){i.push("/")}function C(){i.back()}function z(){c.setFull(!c.isFull)}function F(){if(!p.list.find(e=>e.active)){const e=o(p.list);i.push(e?e.fullPath:"/")}}function I(e){t.scroller.wrapRef.scrollTo({left:e,behavior:"smooth"})}function M(e){const s=t[`item-${e}`];s&&I(s.offsetLeft-(t.scroller.wrapRef.clientWidth+s.clientWidth)/2)}return j(()=>n.path,function(e){M(p.list.findIndex(s=>s.fullPath===e)||0)}),g(()=>{var e;null==(e=t.scroller.wrapRef)||e.addEventListener("wheel",function(e){const s=2*e.deltaY;I(t.scroller.wrapRef.scrollLeft+s)},{passive:!1})}),(e,s)=>{const a=m("cl-svg"),t=m("el-scrollbar");return f(),d("div",de,[k("ul",fe,[k("li",{class:"cl-comm__icon",onClick:C},[x(a,{name:"back"})]),k("li",{class:"cl-comm__icon",onClick:h},[x(a,{name:"refresh"})]),k("li",{class:"cl-comm__icon",onClick:w},[x(a,{name:"home"})])]),k("div",ve,[x(t,{ref:P(l)("scroller"),class:"app-process__scroller"},{default:_(()=>[k("div",_e,[(f(!0),d(y,null,b(P(p).list,(e,s)=>(f(),d("div",{key:s,ref_for:!0,ref:P(l)(`item-${s}`),class:E(["app-process__item",{active:e.active}]),"data-index":s,onClick:a=>function(e,s){M(s),i.push(e.fullPath)}(e,Number(s)),onContextmenu:B(s=>function(e,s){G.open(e,{list:[{label:u("关闭当前"),hidden:s.path!==n.path,callback(e){e(),p.close(),F()}},{label:u("关闭其他"),callback(e){e(),p.set(p.list.filter(e=>e.fullPath==s.fullPath)),F()}},{label:u("关闭所有"),callback(e){e(),p.clear(),F()}}]})}(s,e),["stop","prevent"])},[k("span",ye,S(e.meta.label||e.name||e.path),1),x(a,{class:"close",name:"close",onMousedown:B(e=>function(e){p.remove(e),F()}(Number(s)),["stop"])},null,8,["onMousedown"])],42,he))),128))])]),_:1},512)]),k("ul",be,[k("li",{class:"cl-comm__icon",onClick:z},[P(c).isFull?(f(),v(a,{key:0,name:"screen-normal"})):(f(),v(a,{key:1,name:"screen-full"}))])])])}}}),[["__scopeId","data-v-f0888500"]]),we={class:"app-views"},ge=c({name:"undefined"}),xe=N(c({...ge,name:"app-views",setup(a){const{mitt:t}=e(),{process:l,app:n}=s(),o=W(1),i=u(()=>l.list.filter(e=>{var s;return null==(s=e.meta)?void 0:s.keepAlive}).map(e=>e.path.substring(1,e.path.length).replace(/\//g,"-")));function r(){o.value+=1}return g(()=>{t.on("view.refresh",r)}),I(()=>{t.off("view.refresh")}),(e,s)=>{const a=m("router-view");return f(),d("div",we,[x(a,null,{default:_(({Component:e})=>[x(D,{name:P(n).info.router.transition||"none"},{default:_(()=>[(f(),v(M,{key:o.value,include:i.value},[(f(),v(C(e)))],1032,["include"]))]),_:2},1032,["name"])]),_:1})])}}}),[["__scopeId","data-v-0a75356d"]]),Ce={class:"app-layout__left"},ze={class:"app-layout__right"},Fe=c({name:"undefined"}),Ie=N(c({...Fe,name:"app-layout",setup(e){const{app:a}=s();return(e,s)=>(f(),d("div",{class:E(["app-layout",{"is-collapse":P(a).isFold,"is-full":P(a).isFull}])},[k("div",{class:"app-layout__mask",onClick:s[0]||(s[0]=e=>P(a).fold(!0))}),k("div",Ce,[x(me)]),k("div",ze,[x(ne),x(je),x(xe)])],2))}}),[["__scopeId","data-v-28c23ccd"]]);export{Ie as default};
