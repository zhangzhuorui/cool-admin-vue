import{init as e,throttle as t}from"./echarts@5.6.0-D5a_RdwN.js";import{d as n,i as o,z as s,v as i,g as a,w as r,x as l,e as u,U as c,p}from"./@vue_runtime-core@3.5.18-Bx_iA1Ob.js";import{x as d,F as v,a as f,y as h}from"./@vue_reactivity@3.5.18-BEjiziYi.js";const g=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function m(e){return function(){const t=Object.create(null);return g.forEach(n=>{t[n]=function(t){return(...n)=>{if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)}),t}()}const O={autoresize:[Boolean,Object]},_=/^on[^a-z]/,b=e=>_.test(e);function E(e,t){const n=f(e)?h(e):e;return n&&"object"==typeof n&&"value"in n?n.value||t:n||t}const y={loading:Boolean,loadingOptions:Object};let j=null;const x="x-vue-echarts";document.head.appendChild(document.createElement("style")).textContent="x-vue-echarts{display:block;width:100%;height:100%;min-width:0}\n";const z=function(){if(null!=j)return j;if("undefined"==typeof HTMLElement||"undefined"==typeof customElements)return j=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(x)}catch(e){return j=!1}return j=!0}(),L=/(^&?~?!?)native:/;var w=n({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...O,...y},emits:{},inheritAttrs:!1,setup(n,{attrs:o}){const f=d(),h=d(),g=d(),O=s("ecTheme",null),_=s("ecInitOptions",null),y=s("ecUpdateOptions",null),{autoresize:j,manualUpdate:x,loading:w,loadingOptions:C}=v(n),U=i(()=>g.value||n.option||null),A=i(()=>n.theme||E(O,{})),D=i(()=>n.initOptions||E(_,{})),k=i(()=>n.updateOptions||E(y,{})),H=i(()=>function(e){const t={};for(const n in e)b(n)||(t[n]=e[n]);return t}(o)),$={},R=a().proxy.$listeners,T={};function B(t){if(!f.value)return;const o=h.value=e(f.value,A.value,D.value);function s(){const e=t||U.value;e&&o.setOption(e,k.value)}n.group&&(o.group=n.group),Object.keys(T).forEach(e=>{let t=T[e];if(!t)return;let n=e.toLowerCase();"~"===n.charAt(0)&&(n=n.substring(1),t.__once__=!0);let s=o;if(0===n.indexOf("zr:")&&(s=o.getZr(),n=n.substring(3)),t.__once__){delete t.__once__;const e=t;t=(...o)=>{e(...o),s.off(n,t)}}s.on(n,t)}),j.value?p(()=>{o&&!o.isDisposed()&&o.resize(),s()}):s()}function F(){h.value&&(h.value.dispose(),h.value=void 0)}R?Object.keys(R).forEach(e=>{L.test(e)?$[e.replace(L,"$1")]=R[e]:T[e]=R[e]}):Object.keys(o).filter(e=>b(e)).forEach(e=>{let t=e.charAt(2).toLowerCase()+e.slice(3);if(0===t.indexOf("native:")){const n=`on${t.charAt(7).toUpperCase()}${t.slice(8)}`;return void($[n]=o[e])}"Once"===t.substring(t.length-4)&&(t=`~${t.substring(0,t.length-4)}`),T[t]=o[e]});let M=null;r(x,e=>{"function"==typeof M&&(M(),M=null),e||(M=r(()=>n.option,(e,t)=>{e&&(h.value?h.value.setOption(e,{notMerge:e!==t,...k.value}):B())},{deep:!0}))},{immediate:!0}),r([A,D],()=>{F(),B()},{deep:!0}),l(()=>{n.group&&h.value&&(h.value.group=n.group)});const P=m(h);return function(e,t,n){const o=s("ecLoadingOptions",{}),a=i(()=>({...E(o,{}),...null==n?void 0:n.value}));l(()=>{const n=e.value;n&&(t.value?n.showLoading(a.value):n.hideLoading())})}(h,w,C),function(e,n,o){r([o,e,n],([e,n,o],s,i)=>{let a=null;if(e&&n&&o){const{offsetWidth:s,offsetHeight:i}=e,r=!0===o?{}:o,{throttle:l=100,onResize:u}=r;let c=!1;const p=()=>{n.resize(),null==u||u()},d=l?t(p,l):p;a=new ResizeObserver(()=>{(c||(c=!0,e.offsetWidth!==s||e.offsetHeight!==i))&&d()}),a.observe(e)}i(()=>{a&&(a.disconnect(),a=null)})})}(h,j,f),u(()=>{B()}),c(()=>{z&&f.value?f.value.__dispose=F:F()}),{chart:h,root:f,setOption:function(e,t){n.manualUpdate&&(g.value=e),h.value?h.value.setOption(e,t||{}):B(e)},nonEventAttrs:H,nativeListeners:$,...P}},render(){const e={...this.nonEventAttrs,...this.nativeListeners};return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",o(x,e)}});export{w as E};
