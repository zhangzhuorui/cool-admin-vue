import{u as e,j as t}from"./index-D3YIdvZh.js";import"./store@2.0.12-BfN7CKDu.js";import{A as s,u as r}from"./dev-VfV6_aPV.js";import{a as o}from"./element-plus@2.10.2_vue@3.5.18_typescript@5.5.4_-C0B857f5.js";import{I as i}from"./lodash-es@4.17.21-DuLBTDIG.js";import{d as a,c as p,o as m,a as n,m as c,F as u}from"./@vue_runtime-core@3.5.18-Bx_iA1Ob.js";import{u as l}from"./vue-i18n@11.1.10_vue@3.5.18_typescript@5.5.4_-CsgNkmMV.js";import{u as d,y as _}from"./@vue_reactivity@3.5.18-BEjiziYi.js";import{P as j,p as v}from"./@vue_shared@3.5.18-BWKBh1Qo.js";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./@vue_runtime-dom@3.5.18-D95plCo_.js";import"./@vueuse_core@12.8.2_typescript@5.5.4-CyTP3PVf.js";import"./@vueuse_shared@12.8.2_typescript@5.5.4-B6jvMh_s.js";import"./mitt@3.0.1-BeZB7Ik_.js";import"./pinia@2.3.1_typescript@5.5.4_vue@3.5.18_typescript@5.5.4_-DPB-daMN.js";import"./vue-router@4.5.1_vue@3.5.18_typescript@5.5.4_-LCN95BWb.js";import"./comm-D8jqGG-6.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.18_typescript@5.5.4_-3DUFfuWD.js";import"./element-plus@2.10.4_vue@3.5.18_typescript@5.5.4_-BKZsM6nW.js";import"./dayjs@1.11.13-DxKHiy_y.js";import"./chardet@2.1.0-B0E1a5C9.js";import"./normalize-wheel-es@1.2.0-TzhA1irr.js";import"./@vueuse_core@9.13.0_vue@3.5.18_typescript@5.5.4_-CQVfZnDR.js";import"./@vueuse_shared@9.13.0_vue@3.5.18_typescript@5.5.4_-DyKSiD-b.js";import"./@ctrl_tinycolor@3.6.1-D2oWfImC.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.18_echarts@5.6.0_vue@3.5.18_typescript@5.5.4_-He2CYVXX.js";import"./echarts@5.6.0-D5a_RdwN.js";import"./tslib@2.3.0-ZseNXxlj.js";import"./zrender@5.6.1-BkMfNy7l.js";import"./axios@1.11.0-C-1G2k3o.js";import"./nprogress@0.2.0-Sg3Wh2FH.js";import"./@sxzz_popperjs-es@2.11.7-CT_jBSb5.js";import"./async-validator@4.2.5-j0i5Y79Y.js";import"./memoize-one@6.0.0-BAtLgO95.js";import"./@floating-ui_dom@1.7.2-CHufsicy.js";import"./@floating-ui_core@1.7.2-DWnBSKmT.js";import"./@floating-ui_utils@0.2.10-QZXVpxRV.js";import"./@intlify_core-base@11.1.10-C1bgUhoS.js";import"./@intlify_shared@11.1.10-BEv--mwN.js";import"./@intlify_message-compiler@11.1.10-JI08Nz38.js";const h={class:"loader__text"},y=a({name:"undefined"}),x=f(a({...y,setup(a){const{router:f,service:y,refs:x,setRefs:g}=e(),b=r(),{t:w}=l(),T=d({visible:!1,text:"",setText(e){T.text=e},open(){T.visible=!0},close(){T.visible=!1}});function C(){o.confirm(w("确定要退出编码吗？"),w("提示")).then(()=>{f.replace("/")}).catch(()=>{})}async function z({name:e,data:s}){"aiCode.create"===e&&(T.open(),await Promise.all(s.menu.map(async e=>{0==e.type&&e.router&&(await b.del(e.router),T.setText(w("创建目录：{name}",{name:e.name})),await y.base.sys.menu.add(e).then(async t=>{const r=s.menu.map(s=>{var r;if(s.router&&(null==(r=s.router)?void 0:r.indexOf(e.router+"/"))>=0)return T.setText(w("创建菜单：{name}",{name:s.name})),b.create({...s,parentId:t.id,module:e.router.replace("/",""),prefix:s.router.slice(1)})});await Promise.all(r)}))})),"Java"==t.serviceLang&&(T.setText(w("创建 Java 文件")),await y.base.coding.createCode({codes:s.files.filter(e=>i(e.path,"java"))})),"Node"==t.serviceLang&&(T.setText(w("创建 Node 文件")),await y.base.coding.createCode({codes:s.files.filter(e=>i(e.path,"node")).map(e=>({path:e.path.replace(/^node\//,"src/modules/"),content:e.content}))})),T.setText(w("正在重启服务")),await async function(){return new Promise(e=>{const t=()=>{setTimeout(()=>{y.base.open.eps().then(()=>{e(1)}).catch(()=>{t()})},3e3)};t()})}(),T.setText(w("创建 Vue 文件")),await Promise.all(s.files.map(e=>{if(i(e.path,"vue"))return y.request({url:"/__cool_createFile",method:"POST",proxy:!1,data:{path:e.path.replace(/^vue\//,"modules/"),code:e.content}})})),T.close(),location.reload()),"aiCode.loaded"===e&&y.base.coding.getModuleTree().then(e=>{x.aiCode.send("aiCode.setDir",e)})}return(e,t)=>(m(),p(u,null,[n("div",{class:"back",onClick:C},t[0]||(t[0]=[n("i",{class:"iconfont icon-zuo"},null,-1)])),n("div",{class:v(["loader",{"is-show":T.visible}])},[t[1]||(t[1]=n("div",{class:"preload__loading"},null,-1)),n("p",h,j(T.text),1)],2),c(s,{path:"/ai/code",ref:_(g)("aiCode"),onMessage:z},null,512)],64))}}),[["__scopeId","data-v-f09aedac"]]);export{x as default};
